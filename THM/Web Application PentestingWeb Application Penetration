🌐 Webアプリケーションペネトレーションテスト実践ログ
📝 概要 (Overview)
このドキュメントは、TryHackMeの「Web Application Pentesting」トラックで実施した、
Enumeration & BruteforceおよびSession Managementのルームでの学習内容と実践手法をまとめたものです。
Webアプリケーション診断の初期段階における情報収集と、認証・セッション関連の脆弱性に関する知識を深めることを目的としました。

🚀 I. Enumeration & Bruteforce (列挙とブルートフォース)
このセクションでは、Webアプリケーションの構造を理解し、認証情報を取得するための基本的な手法を実践しました。
1. 情報収集とWebアプリケーションのマッピング
ロボット除けメカニズムの調査:
robots.txt ファイルをチェックし、検索エンジンのクローラーに対して非公開に設定されているディレクトリやエンドポイントを特定しました。
sitemap.xml の確認も行い、アプリケーションの全構造を把握する手がかりとしました。
ディレクトリとファイルの列挙:
DirBuster や Gobuster などのツールを使用し、ワードリストに基づいてWebサーバー上の隠されたディレクトリ、ファイル、サブディレクトリを体系的に探索しました。
これにより、設定ファイル、バックアップファイル、または管理パネルなどの非公開リソースを発見しました。

2. 認証情報のブルートフォース攻撃
ログインメカニズムの分析:
ターゲットアプリケーションのログインフォームを特定し、認証リクエストのパラメータ（ユーザー名、パスワード）を特定しました。
Burp Suite Intruderの活用:
Burp Suiteの Intruder モジュールを使用して、ユーザー名やパスワードの候補リスト（ワードリスト）を繰り返しリクエストに注入し、認証を試行しました。
ペイロード：辞書ファイル（例：rockyou.txt）から得た一般的なパスワードを使用。
さらに、追加の課題であるhydraを用いたパスワード総当たり攻撃も行い、パスワードを解析しました。
Burp Suite IntruderとHydraでは、Hydraの方が総当たり攻撃でのパスワード解析が速いということが分かった。
レスポンス分析: ログイン成功時と失敗時のHTTPレスポンス（ステータスコード、レスポンスサイズ、エラーメッセージなど）の違いを分析し、有効な認証情報を特定しました。

3. その他の列挙技術
HTTPメソッドの列挙: OPTIONS メソッドを使用して、サーバーが許可しているHTTPメソッド（例: GET, POST, PUT, DELETE）を特定しました。
バージョン情報漏洩の確認: HTTPヘッダー（例: Server、X-Powered-By）やエラーメッセージから、サーバーソフトウェアやフレームワークのバージョン情報を収集し、既知の脆弱性の有無を確認しました。

🔐 II. Session Management (セッション管理)
このセクションでは、セッション管理の仕組みを理解し、セッションに関連する脆弱性の悪用手法を実践しました。
1. セッション管理の基礎理解
セッションIDの仕組み: 認証後、サーバーがクライアントに発行する一意の識別子（セッションID）がどのように管理されているかを学習しました。
セッションの保存場所: クッキー、URLパラメータ、隠しフォームフィールドなど、セッションIDがどこに格納され、転送されるかを特定しました。
2. セッションの脆弱性分析
セッションIDの予測可能性 (Predictability):
セッションIDがランダムであるか、規則性を持っているかを分析しました。シーケンシャルなIDやタイムスタンプに基づくIDなど、予測可能なセッションIDはセッションハイジャックのリスクを高めます。
セッション固定攻撃 (Session Fixation):
ユーザーが認証する前に、攻撃者がセッションIDをクライアントに強制的に設定させ、認証後にそのIDが引き継がれるかどうかをテストしました。
セッションの盗難 (Session Hijacking):
キャプチャしたセッションIDを使用して、認証されたユーザーのセッションを乗っ取る手法を学習・実践しました。
3. セッショントークンの分析と対策
トークンの強度:
セッションIDの長さ、文字セット、エントロピーを評価し、総当たり攻撃に対する耐性を確認しました。
Cookieの属性設定:
セッショントークンが設定されているCookieの属性（HttpOnly, Secure, SameSiteなど）を確認しました。
HttpOnly がない場合、JavaScriptを介した **XSS（クロスサイトスクリプティング）**によるセッショントークン窃取のリスクを特定しました。
Secure がない場合、HTTPS接続外でのセッショントークン盗聴のリスクを確認しました。

💡 まとめと今後の展望
これらのルームを完了したことで、Webアプリケーションの脆弱性診断において最も頻繁に遭遇する情報漏洩（列挙）、認証の弱点（ブルートフォース）、
そしてセッション管理の不備に関する実践的なスキルを習得しました。

今後は、これらの知識を応用し、SQLインジェクションやクロスサイトスクリプティングなど、より複雑な攻撃手法を学習していきます。
